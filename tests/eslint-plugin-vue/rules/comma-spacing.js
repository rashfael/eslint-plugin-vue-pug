// SKIP AUTOGENERATION
// AUTOGENERATED FROM https://github.com/vuejs/eslint-plugin-vue/blob/8f094200664a2b10bc597016f5486066a174e098/tests/lib/rules/comma-spacing.js
/**
 * @author Yosuke Ota
 */
'use strict'

const RuleTester = require('eslint').RuleTester
const rule = require('../../../eslint-plugin-vue/lib/rules/comma-spacing')

const tester = new RuleTester({
  languageOptions: {
    parser: require('vue-eslint-parser'),
    ecmaVersion: 2020,
    parserOptions: {
      templateTokenizer: { pug: 'vue-eslint-parser-template-tokenizer-pug' }
    }
  }
})

tester.run('comma-spacing', rule, {
  valid: [
    `<template lang="pug">
button(@click=\`
  var foo = 1, bar = 2;
\`) OK
</template>`,
    `<template lang="pug">DateInput(:value="[2000, 12, 31]")</template>`,
    `<template lang="pug">DateInput(:value="{y: 2000, m: 12, d: 31}")</template>`,
    `<template lang="pug">CustomDlg(@ok="foo(a, b)")</template>`,
    `<template lang="pug">CustomDlg(@ok="(a, b) => {}")</template>`,
    `<template lang="pug">CustomDlg(@ok="function (a, b) {}")</template>`,
    `<template lang="pug">
CustomList
  li(slot-scope="a, b") {{ a }}
</template>`,
    {
      code: `
        <template lang="pug">
button(@click=\`
  fn(a ,b)
\`)
</template>`,
      options: [{ before: true, after: false }]
    },
    `<template lang="pug">div(:[fn(a,b)]="val")</template>`,
    `<template lang="pug">div(:[[,]]="val")</template>`,
    `<template lang="pug">div(:[a,]="val")</template>`,
    `<script>
    fn = (a,b) => {}
    </script>`,
    `fn = (a,b) => {}`,
    // CSS vars injection
    `
    <style>
    .text {
      color: v-bind('foo(a, b)')
    }
    </style>`
  ],
  invalid: [
    {
      code: `
        <template lang="pug">
button(@click=\`
  var foo = 1 ,bar = 2;
\`) NG
</template>`,
      output: `
        <template lang="pug">
button(@click=\`
  var foo = 1, bar = 2;
\`) NG
</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 4,
          column: 15
        },
        {
          message: "A space is required after ','.",
          line: 4,
          column: 15
        }
      ]
    },
    {
      code: `<template lang="pug">DateInput(:value="[2000 ,12 ,31]")</template>`,
      output: `<template lang="pug">DateInput(:value="[2000, 12, 31]")</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        },
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        }
      ]
    },
    {
      code: `<template lang="pug">DateInput(:value="{y: 2000 ,m: 12 ,d: 31}")</template>`,
      output: `<template lang="pug">DateInput(:value="{y: 2000, m: 12, d: 31}")</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        },
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        }
      ]
    },
    {
      code: `<template lang="pug">CustomDlg(@ok="foo(a ,b)")</template>`,
      output: `<template lang="pug">CustomDlg(@ok="foo(a, b)")</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        }
      ]
    },
    {
      code: `<template lang="pug">CustomDlg(@ok="(a ,b) => {}")</template>`,
      output: `<template lang="pug">CustomDlg(@ok="(a, b) => {}")</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        }
      ]
    },
    {
      code: `<template lang="pug">CustomDlg(@ok="function (a ,b) {}")</template>`,
      output: `<template lang="pug">CustomDlg(@ok="function (a, b) {}")</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        }
      ]
    },
    {
      code: `
        <template lang="pug">
CustomList
  li(slot-scope="a ,b") {{ a }}
</template>`,
      output: `
        <template lang="pug">
CustomList
  li(slot-scope="a, b") {{ a }}
</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 4
        },
        {
          message: "A space is required after ','.",
          line: 4
        }
      ]
    },
    {
      code: `<template lang="pug">| {{ [a /*comment*/ ,/*comment*/b] }}</template>`,
      output: `<template lang="pug">| {{ [a /*comment*/, /*comment*/b] }}</template>`,
      errors: [
        {
          message: "There should be no space before ','.",
          line: 1
        },
        {
          message: "A space is required after ','.",
          line: 1
        }
      ]
    },
    {
      code: `
        <template lang="pug">
button(@click=\`
  fn(a, b)
\`)
</template>`,
      options: [{ before: true, after: false }],
      output: `
        <template lang="pug">
button(@click=\`
  fn(a ,b)
\`)
</template>`,
      errors: [
        {
          message: "A space is required before ','.",
          line: 4
        },
        {
          message: "There should be no space after ','.",
          line: 4
        }
      ]
    },
    {
      code: `
      <style>
      .text {
        color: v-bind('foo(a,b)')
      }
      </style>`,
      output: `
      <style>
      .text {
        color: v-bind('foo(a, b)')
      }
      </style>`,
      errors: [
        {
          message: "A space is required after ','.",
          line: 4
        }
      ]
    }
  ]
})
