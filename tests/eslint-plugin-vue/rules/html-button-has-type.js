// SKIP AUTOGENERATION
// AUTOGENERATED FROM https://github.com/vuejs/eslint-plugin-vue/blob/8f094200664a2b10bc597016f5486066a174e098/tests/lib/rules/html-button-has-type.js
/**
 * @fileoverview Prevent usage of button without an explicit type attribute
 * @author Jonathan Santerre
 */
'use strict'

// ------------------------------------------------------------------------------
// Requirements
// ------------------------------------------------------------------------------

const rule = require('../../../eslint-plugin-vue/lib/rules/html-button-has-type')

const RuleTester = require('eslint').RuleTester

// ------------------------------------------------------------------------------
// Tests
// ------------------------------------------------------------------------------

const tester = new RuleTester({
  languageOptions: {
    parser: require('vue-eslint-parser'),
    ecmaVersion: 'latest',
    parserOptions: {
      templateTokenizer: { pug: 'vue-eslint-parser-template-tokenizer-pug' }
    }
  }
})
tester.run('html-button-has-type', rule, {
  valid: [
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(type="button") Hello World</template>`
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(type="submit") Hello World</template>`
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(type="reset") Hello World</template>`
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">
slot
  button(type="button") Hello World
</template>`
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">
button(type="button") Hello World
button(type="submit") Hello World
button(type="reset") Hello World
</template>`
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(:type="buttonType") Hello World</template>`
    },
    {
      filename: 'test.vue',
      code: ''
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">Button Hello World</template>`
    }
  ],

  invalid: [
    {
      filename: 'test.vue',
      code: `<template lang="pug">button Hello World</template>`,
      errors: [
        {
          message: 'Missing an explicit type attribute for button.',
          column: 22
        }
      ]
    },
    // {
    //   filename: 'test.vue',
    //   code: `<template lang="pug">button(type=) Hello World</template>`,
    //   errors: [
    //     {
    //       message: 'A value must be set for button type attribute.',
    //       column: 24
    //     }
    //   ]
    // },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(type) Hello World</template>`,
      errors: [
        {
          message: 'A value must be set for button type attribute.',
          column: 29
        }
      ]
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(type="foo") Hello World</template>`,
      errors: [
        {
          message: 'foo is an invalid value for button type attribute.',
          column: 34
        }
      ]
    },
    {
      filename: 'test.vue',
      options: [{ button: false }],
      code: `<template lang="pug">button(type="button") Hello World</template>`,
      errors: [
        {
          message: 'button is a forbidden value for button type attribute.',
          column: 34
        }
      ]
    },
    {
      filename: 'test.vue',
      options: [{ submit: false }],
      code: `<template lang="pug">button(type="submit") Hello World</template>`,
      errors: [
        {
          message: 'submit is a forbidden value for button type attribute.',
          column: 34
        }
      ]
    },
    {
      filename: 'test.vue',
      options: [{ reset: false }],
      code: `<template lang="pug">button(type="reset") Hello World</template>`,
      errors: [
        {
          message: 'reset is a forbidden value for button type attribute.',
          column: 34
        }
      ]
    },
    {
      filename: 'test.vue',
      options: [{ button: false, submit: false, reset: false }],
      code: `<template lang="pug">
button(type="button") Hello World
button(type="submit") Hello World
button(type="reset") Hello World
</template>`,
      errors: [
        {
          message: 'button is a forbidden value for button type attribute.',
          line: 2,
          column: 13
        },
        {
          message: 'submit is a forbidden value for button type attribute.',
          line: 3,
          column: 13
        },
        {
          message: 'reset is a forbidden value for button type attribute.',
          line: 4,
          column: 13
        }
      ]
    },
    {
      filename: 'test.vue',
      options: [{ button: true, submit: true, reset: false }],
      code: `<template lang="pug">
button(type="button") Hello World
button(type="submit") Hello World
button(type="reset") Hello World
// button(type=) Hello World
button(type="foo") Hello World
</template>`,
      errors: [
        {
          message: 'reset is a forbidden value for button type attribute.',
          line: 4,
          column: 13
        },
        // {
        //   message: 'A value must be set for button type attribute.',
        //   line: 5,
        //   column: 13
        // },
        {
          message: 'foo is an invalid value for button type attribute.',
          line: 6,
          column: 13
        }
      ]
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">
button Hello World
button Hello World
</template>`,
      errors: [
        {
          message: 'Missing an explicit type attribute for button.',
          column: 1
        },
        {
          message: 'Missing an explicit type attribute for button.',
          column: 1
        }
      ]
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(:type="") Hello World</template>`,
      errors: [
        {
          message: 'A value must be set for button type attribute.',
          column: 35
        }
      ]
    },
    {
      filename: 'test.vue',
      code: `<template lang="pug">button(v-bind:type) Hello World</template>`,
      errors: [
        {
          message: 'A value must be set for button type attribute.',
          column: 29
        }
      ]
    }
  ]
})
