// SKIP AUTOGENERATION
// AUTOGENERATED FROM https://github.com/vuejs/eslint-plugin-vue/blob/8f094200664a2b10bc597016f5486066a174e098/tests/lib/rules/no-restricted-class.js
/**
 * @author Tao Bojlen
 */

'use strict'

const rule = require('../../../eslint-plugin-vue/dist/rules/no-restricted-class').default
const RuleTester = require('eslint').RuleTester

const tester = new RuleTester({
  languageOptions: {
    parser: require('vue-eslint-parser'),
    ecmaVersion: 'latest',
    sourceType: 'module',
    parserOptions: {
      templateTokenizer: { pug: 'vue-eslint-parser-template-tokenizer-pug' }
    }
  }
})

tester.run('no-restricted-class', rule, {
  valid: [
    { code: `<template lang="pug">.allowed Content</template>` },
    {
      code: `<template lang="pug">div(class="allowed") Content</template>`,
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="'allowed' + forbidden") Content</template>`,
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(@class="forbidden") Content</template>`,
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="'' + {forbidden: true}") Content</template>`,
      options: ['forbidden']
    }
  ],

  invalid: [
    // {
    //   code: `<template lang="pug">.forbidden.allowed</template>`,
    //   errors: [
    //     {
    //       message: "'forbidden' class is not allowed.",
    //       type: 'VAttribute'
    //     }
    //   ],
    //   options: ['forbidden']
    // },
    {
      code: `<template lang="pug">div(:class="'forbidden' + ' ' + 'allowed' + someVar")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'Literal'
        }
      ],
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="{'forbidden': someBool, someVar: true}")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'Literal'
        }
      ],
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="{forbidden: someBool}")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'Identifier'
        }
      ],
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="\`forbidden \${someVar}\`")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'TemplateElement'
        }
      ],
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="'forbidden'")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'Literal'
        }
      ],
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="['forbidden', 'allowed']")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'Literal'
        }
      ],
      options: ['forbidden']
    },
    {
      code: `<template lang="pug">div(:class="['allowed forbidden', someString]")</template>`,
      errors: [
        {
          message: "'forbidden' class is not allowed.",
          type: 'Literal'
        }
      ],
      options: ['forbidden']
    }
  ]
})
